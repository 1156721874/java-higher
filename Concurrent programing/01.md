## 线程安全

### 什么是线程安全？

直观的，多个线程访问一个类时，这个类始终都能表现出正确的行为，那么这个类就是线程安全的。

### 锁，Java中的锁都是对象锁。

- 普通方法上的锁，锁的是对象
- 静态方法上的锁，锁的是类的字节码对象
- 代码块上的锁，锁的是括号中的对象

## 多个对象多个锁

Java的锁是对象锁，所以如果多个线程访问的是互不相同的对象，那么也是互不干扰的。

## 对象锁的同步和异步

同步：同步的概念关键是 ** 共享 ** ,如果不是共享的资源，就没必要进行同步。

异步：异步的概念就是 ** 独立 ** ，相互之间不受任何制约。

同步的目的是为了线程安全，对于线程安全，需要满足两个条件：

- 原子性(同步)
- 可见性

## 脏读

设计应用程序的时候，一定要考虑业务的整体性，业务整体枷锁。否则数据不一致会产生脏读。

ACID，指数据库事务正确执行的四个基本要素的缩写。包含：原子性（Atomicity）、一致性（Consistency）、隔离性（Isolation）、持久性（Durability）。一个支持事务（Transaction）的数据库，必需要具有这四种特性，否则在事务过程（Transaction processing）当中无法保证数据的正确性，交易过程极可能达不到交易方的要求。
目前主要有两种方式实现ACID：第一种是Write ahead logging，也就是日志式的方式(现代数据库均基于这种方式)。第二种是Shadow paging。Oracle一致性读，UNDO

## synchronized
